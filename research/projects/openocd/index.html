<!DOCTYPE html>
<head>
<meta charset='utf-8'>

<meta content='width=device-width, initial-scale=1.0' name='viewport'>
<title>Shanjit Singh Jajmann</title>
<link href="../../../application.css" media="screen" rel="stylesheet" type="text/css" />
<script src="../../../application.js" type="text/javascript"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" type="text/javascript"></script>

<style type="text/css">
	  body {
        padding-top: 0px;
        padding-bottom: 0px;
        background: #FFFFD6 no-repeat fixed center;
        color:#C15D63;
		
		}
		.boxed {
  border: 1px solid #C15D63	;
        padding:15px;
}

    </style>

</head>
<body>
<section class='sidebar'>
<h1 class='name'>
Shanjit Singh Jajmann
</h1>
<nav>
<div><a href="http://www.shanjitsingh.in/index.html" class="navlink inactive">About</a></div>
<div><a href="http://blog.shanjitsingh.in" class="navlink inactive">Blog</a></div>
<div><a href="http://www.shanjitsingh.in/research/index.html" class="navlink active">Projects</a></div>
<div><a href="http://shanjit.github.com/research/index.html#pub" class="navlink inactive">Publications</a></div>
<div><a href="http://www.shanjitsingh.in/resume/index.html" class="navlink inactive">Resume</a></div>
</nav>
<h2 class='find_me'>
Contact:
</h2>
<div class='icons'>
<a class='icon' href='https://github.com/shanjit'>
<i class='icon-github-circled icon'></i>
</a>
<a class='icon' href='http://www.facebook.com/shanjitsingh'>
<i class='icon-facebook-circled icon'></i>
</a>
<a class='icon' href='mailto:shanjitsingh@gmail.com'>
<i class='icon-mail icon'></i>
</a>
</div>
</section>
<section class='content' style=
    "width:70%; background: #FFFFD6 no-repeat fixed center;">

      <div align="justify">
  
        <h1 style="color:black;"><a >Using OpenOCD with TI and ST Microcontrollers</a></h1>
      
        <p>
      The <a style="color:black;" href="http://openocd.sourceforge.net/">Open On-Chip 
      Debugger</a> (OpenOCD) is aims to provide debugging, 
      in-system programming and boundary-scan testing for embedded 
      target systems. OpenOCD provides the ability to flash NAND and 
      NOR FLASH memory devices that are attached to the processor on 
      the target system. Flash programming is supported for external CFI compatible flashes (Intel and AMD/Spansion command set) and several internal flashes (LPC2000, AT91SAM7, STR7x, STR9x, LM3 and STM32x).<br><br>

JTAG: OpenOCD uses a "hardware- interface dongle" to communicate with the JTAG (IEEE 1149.1) compliant TAPs on your target board. A TAP is a "Test Access Port", a module which process special instructions and data. TAPs are daisy-chained within and between chips and boards.<br>
Dongles: OpenOCD currently suppports many types of hardware dongles: USB based, parallel port based, and other standalone boxes that run OpenOCD internally.<br>
The JTAG is a standard debugging interface inbuilt in all ARM microcontrollers. <br><br>

I use OpenOCD with GDB integrated with Eclipse for debugging with the JTAG.<br>

Every ARM microcontroller has onboard two immediate solutions for debugging JTAG (Joint Test Action Group) and SWD (Serial Wire Debug). These are two standards used for debugging.<br><br>

<div style="color:black;">So how does it help me ?</div><br>
Hardware debugging is a boon! Its value is only known to someone who has spent countless hours going over lines of code not being able to figure out where the error is. Hardware debugging using OpenOCD and GDB helps set breakpoints, instruction line execution, set watchpoints and lets the programmer lookup memory and register level values. Debugging can save you hours of precious time. 
<br><br>
<div style="color:black;">How do i run it ?</div><br>
COMMAND LINE<br>
1. Install OpenOCD.<br>
see website, make sure you have all the dependencies. libftdi-dev <br>

2. Run OpenOCD as root<br>

<i>sudo openocd -f ./tcl/interface/luminary-lm3s811.cfg -f ./tcl/target/stellaris.cfg</i><br>

#make sure you choose the correct interfaces. <br>
#ICDI - In-Circuit Debugging Interface (provided by TI)
<br><br>
3. How do i debug ? <br>
Use gdb debugger to debug, #using telnet is another option<br>
<i>
arm-none-eabi-gdb <file-name>.axf<br>
target remote localhost:4444<br>
monitor reset halt<br>
load </i><br><br>

#pressing Ctrl-C anytime will halt execution.<br>
#continue resume execution<br>
#help gives a total list of commands that can be used.<br>

<br><br>

<div style="color:black;">Using with Eclipse</div><br>

Eclipse needs to be started using Super User privileges for accessing Hardware Devices using OpenOCD, alternative suggested ahead .
After configuring the toolchain from a previous post, the current 
environment on Ubuntu looks like, <br>

      
        </p>
        <!--<p><a class="btn" href="#">Read more</a></p>-->
      
      <div align="center">
      
	  <a href="https://sites.google.com/site/cuilyahoo/_/rsrc/1352556396451/projects/research-assistantship-texas-instruments/jtag-debugging/8.png"><img height=336 width=600 src="https://sites.google.com/site/cuilyahoo/_/rsrc/1352556396451/projects/research-assistantship-texas-instruments/jtag-debugging/8.png"><br><br>
      <a href="https://sites.google.com/site/cuilyahoo/_/rsrc/1352556396451/projects/research-assistantship-texas-instruments/jtag-debugging/9.png"><img height=336 width=600 src="https://sites.google.com/site/cuilyahoo/_/rsrc/1352556396451/projects/research-assistantship-texas-instruments/jtag-debugging/9.png"><br><br>
      <a href="https://sites.google.com/site/cuilyahoo/_/rsrc/1352556396451/projects/research-assistantship-texas-instruments/jtag-debugging/13.png"><img height=336 width=600 src="https://sites.google.com/site/cuilyahoo/_/rsrc/1352556396451/projects/research-assistantship-texas-instruments/jtag-debugging/13.png"><br><br>
      <a href="https://sites.google.com/site/cuilyahoo/_/rsrc/1352556396451/projects/research-assistantship-texas-instruments/jtag-debugging/15.png"><img height=336 width=600 src="https://sites.google.com/site/cuilyahoo/_/rsrc/1352556396451/projects/research-assistantship-texas-instruments/jtag-debugging/15.png"><br><br>
      <a href="https://sites.google.com/site/cuilyahoo/_/rsrc/1352556396451/projects/research-assistantship-texas-instruments/jtag-debugging/16.png"><img height=336 width=600 src="https://sites.google.com/site/cuilyahoo/_/rsrc/1352556396451/projects/research-assistantship-texas-instruments/jtag-debugging/16.png" ><br><br>
      <a href="https://sites.google.com/site/cuilyahoo/_/rsrc/1352556396451/projects/research-assistantship-texas-instruments/jtag-debugging/12.png"><img height=336 width=600 src="https://sites.google.com/site/cuilyahoo/_/rsrc/1352556396451/projects/research-assistantship-texas-instruments/jtag-debugging/12.png"></a>
      </div>

	<br>
	
<b>Eclipse needs to be started using Super User privileges for 
accessing Hardware Devices using OpenOCD, alternative suggested 
ahead.</b><br>
After configuring the toolchain from a previous post, the current 
environment on Ubuntu looks as shown, 
<br><br>
Go to the External Tools Configuration, Create a new Tools 
Configuration named OpenOCD as 
shown,<br><br>
This should enable you to start OpenOCD on clicking the external tools configuration found on the Eclipse main panels.

Now to get the GDB debugger working, Create another External Tools 
Configuration as shown,<br><br>
Make sure the configurations are entered as 
shown,<br><br>

You are now set to run OpenOCD integrated with the Eclipse IDE,<br>

First run OpenOCD from the external tools configuration, then run the debugger from the external tools drop down, Eclipse then changes to the Debug Perspective as shown,<br><br>

Thats all i am saying, Go Ahead click a few buttons, figure it out. Cheers. <br><br>

Running OpenOCD with Eclipse without Sudo<br>
1. Change the current User to group plugdev<br>

2. Determine Device and Product ID<br>

3. Add hardware to the plugdev group, using 2. <br>

4. Reload udev file to get it working.<br>

Note : <br>
OpenOCD and gdb debugging won't work on a virtual environment. Make sure you do it on your native system. OpenOCD is available for both <a style="color:black;" href="http://openocd.sourceforge.net/">windows and linux</a>.<br>
<br>
More information <a style="color:black;" href="http://openocd.sourceforge.net/doc/html/GDB-and-OpenOCD.html">here</a>.
	
	
        <p>
          <a style="color:black;" href="http://www.shanjitsingh.in">Shanjit Singh Jajmann</a> 
          | August 29th, 2011
        </p>
      
      </div>
      </div>




















</section>
</body>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-36726461-1']);
  _gaq.push(['_setDomainName', 'shanjitsingh.in']);
  _gaq.push(['_trackPageview']);
  
  
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

</html>
